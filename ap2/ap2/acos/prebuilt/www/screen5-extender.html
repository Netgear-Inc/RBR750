<!DOCTYPE html>
<!--[if IE 7]>         <html class="no-js ie7"> <![endif]-->
<!--[if IE 8]>         <html class="no-js ie8"> <![endif]-->
<!--[if IE 9]>         <html class="no-js ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <%0%>
    <title><%93%></title>
    <link rel="stylesheet" href="styles/main.css">
    <%2%>
  </head>
  <body class="setup enterExtenderSettings" onLoad="Loadsettings();">
    
    <%3%>
    
    <form id="securitySettings" name="securitySettings" action="ia_ap_setting.cgi" method="POST" target="" autocomplete="off">
      <div id="content">    
        <div class="container">
     
        <p class="instruction"><span id="header_str"><%469%></span> <a id="learnMore" class='tipLink'><%5%></a></p>
         
        <div class="main">
          <div class="column first" id="ssid_24g_row" style="display:none">
            <h2><%470%></h2>
            <div class="networkInput roundCorners">
              <ul class="formElements">
                <li>
                  <label for="ssid"><%96%></label>
                  <input type="text" id="ssid" class="networkName" name="ssid" value="<%97%>" size="33" maxlength="32" />
                </li>
                <li style="display:none;" class="whatPwd_li">
                  <select class="whatPwd" name="what_pwd" id="whatPwd">
                    <option value="0"><%471%></option>
                    <option value="1"><%472%></option>
                    <option value="2"><%473%></option>
                  </select>
                </li>
                <li class="diffPwd">
                  <ul class="formElements">
                    <li>
                      <select class="securityOptions" name="sec_opt" id="securityOptions">
                        <option value="0"><%98%></option>
                        <option value="1"><%99%></option>
                        <option value="2"><%100%></option>
                        <!--<option value="3"><%101%></option>-->
                        <option value="4"><%102%></option>
                        <option value="5"><%103%></option>
                      </select>
                    </li>
                    <li class="pwdInput">
                      <label for="pwd"><%104%></label>
                      <input type="password" id="pwd" class="primaryPwd" name="passphrase" />
                      <label for="verifyPwd"><%105%></label>
                      <input type="password" name="verify_pwd" id="verifyPwd" class="verifyPwd" />
                    </li>
                    <!-----------2.4G WEP DIV Start---------->
                    <li class="manual_wep wepInput"  style = "display:none;">
                      <ul class="formElements">
                        <li>
                          <label><%106%>:</label>
                          <select name="wep_enc" id="wepEnc" size=1 onchange="setKeys(wep_enc, key1, key2, key3, key4,2);">
                            <option selected value="1"><%107%></option>
                            <option value="2"><%108%></option>
                          </select>
                        </li>
                        <li><strong><%109%></strong></li>
                        <li class="wepKeyField">
                          <ul class="formElements">
                            <li>
                              <label><%110%></label>
                              <input type="radio"  checked name="wep_key_no" id="wepKeyNo" value="1">
                              <input type="text" autocomplete="off" class="KEY_manual" name="key1" id="key1" maxLength=32 size=12 value="" onkeydown="keyCheck(this)" onfocus="this.form.wep_key_no[0].checked=true;">
                            </li>
                            <li>
                              <label><%111%></label>
                              <input type="radio" name="wep_key_no" id="wepKeyNo" value="2">
                              <input type="text" autocomplete="off" class="KEY_manual" name="key2" id="key2" maxLength=32 size=12 value="" onkeydown="keyCheck(this)" onfocus="this.form.wep_key_no[1].checked=true;">
                            </li>
                            <li>
                              <label><%112%></label>
                              <input type="radio" name="wep_key_no" id="wepKeyNo" value="3">
                              <input type="text" autocomplete="off" class="KEY_manual" name="key3" id="key3" maxLength=32 size=12 value="" onkeydown="keyCheck(this)" onfocus="this.form.wep_key_no[2].checked=true;">
                            </li>
                            <li>
                              <label><%113%></label>
                              <input type="radio" name="wep_key_no" id="wepKeyNo" value="4">
                              <input type="text" autocomplete="off" class="KEY_manual" name="key4" id="key4" maxLength=32 size=12 value="" onkeydown="keyCheck(this)" onfocus="this.form.wep_key_no[3].checked=true;">
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <!-----------2.4G WEP DIV End---------->

                  </ul>
                </li>
              </ul>
            </div>
          </div>
          
          <div class="column" id="ssid_5g_row" style="display:none">
            <h2><%474%></h2>
            <div class="networkInput roundCorners">
              <ul class="formElements">
                <li>
                  <label for="ssid5g"><%96%></label>
                  <input type="text" id="ssid5g" class="networkName" name="ssid_5g" value="<%115%>" size="33" maxlength="32" />
                </li>
                <li style="display:none;" class="whatPwd_li">
                  <select class="whatPwd" name="what_pwd_5g" id="whatPwd5g">
                    <option value="0"><%471%></option>
                    <option value="1"><%472%></option>
                    <option value="2"><%473%></option>
                  </select>
                </li>
                <li class="diffPwd">
                  <ul class="formElements">
                    <li>
                      <select class="securityOptions" name="sec_opt_5g" id="securityOptions5G">
                        <option value="0"><%98%></option>
                        <option value="1"><%99%></option>
                        <option value="2"><%100%></option>
                        <!--<option value="3"><%101%></option>-->
                        <option value="4"><%102%></option>
                        <option value="5"><%103%></option>
                      </select>
                    </li>
                    <li class="pwdInput">
                      <label for="pwd5g"><%104%></label>
                      <input type="password" id="pwd5g" class="primaryPwd" name="passphrase_5g" />
                      <label for="verifyPwd5g"><%105%></label>
                      <input type="password" name="verify_pwd_5g" id="verifyPwd5g" class="verifyPwd" />
                    </li>
                  <!-----------5G WEP DIV Start---------->
                  <li class="manual_wep wepInput"  style = "display:none;">
                    <ul class="formElements">
                      <li>
                        <label><%106%>:</label>
                        <select name="wep_enc_5g" id="wepEnc5g" size=1 onchange="setKeys(wep_enc_5g, key5g1, key5g2, key5g3, key5g4,5);">
                          <option selected value="1"><%107%></option>
                          <option value="2"><%108%></option>
                        </select>
                      </li>
                      <li><strong><%109%></strong></li>
                      <li class="wepKeyField">
                        <ul class="formElements">
                          <li>
                            <label><%110%></label>
                            <input type="radio"  checked name="wep_key_no_5g" id="wepKeyNo5g" value="1">
                            <input type="text" autocomplete="off" class="KEY_manual" name="key5g1" id="key5g1" maxLength=32 size=12 value="" onkeydown="keyCheck_5g(this)" onfocus="this.form.wep_key_no_5g[0].checked=true;">
                          </li>
                          <li>
                            <label><%111%></label>
                            <input type="radio" name="wep_key_no_5g" id="wepKeyNo5g" value="2">
                            <input type="text" autocomplete="off" class="KEY_manual" name="key5g2" id="key5g2" maxLength=32 size=12 value="" onkeydown="keyCheck_5g(this)" onfocus="this.form.wep_key_no_5g[1].checked=true;">
                          </li>
                          <li>
                            <label><%112%></label>
                            <input type="radio" name="wep_key_no_5g" id="wepKeyNo5g" value="3">
                            <input type="text" autocomplete="off" class="KEY_manual" name="key5g3" id="key5g3" maxLength=32 size=12 value="" onkeydown="keyCheck_5g(this)" onfocus="this.form.wep_key_no_5g[2].checked=true;">
                          </li>
                          <li>
                            <label><%113%></label>
                            <input type="radio" name="wep_key_no_5g" id="wepKeyNo5g" value="4">
                            <input type="text" autocomplete="off" class="KEY_manual" name="key5g4" id="key5g4" maxLength=32 size=12 value="" onkeydown="keyCheck_5g(this)" onfocus="this.form.wep_key_no_5g[3].checked=true;">
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <!-----------5G WEP DIV End---------->

                  </ul>
                </li>
              </ul>
            </div>
          </div>
        
        
        
        </div>
        <!-- end main -->
      </div>
      </div>
      <!-- end container -->
      <div id="fixedFooter">
        <div class="container">
          <footer>
            <div class="centerButtons">
              <div class="processButtons">
              <a id="backStep" class="btn secondary" href=""><%19%></a>
              <input id="nextStep" name="next" class="btn primary" type="button" value="<%70%>" onclick="return CheckData();" disabled>
            </div>
            </div>
          </footer>
        </div>
      </div>
      <!-- end fixed footer -->
      <input type="hidden" name="current_flow" value="IA">
      <input type="hidden" name="wl_same_sec" value="">
      <input type="hidden" name="wl_same_sec_5g" value="">
      <input type="hidden" name="security_type" value="<%475%>">
      <input type="hidden" name="security_type_5g" value="<%476%>">
      <input type="hidden" name="ap_mode_flag" id="ap_mode_flag" value="<%477%>">
      <input type="hidden" name="mode" id="mode" value="<%463%>">
      <input type="hidden" name="ap_band" id="ap_band" value="<%464%>">
    </form>
    
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/pwdStrength.js" type="text/javascript"></script>
    <script src="scripts/main.js"></script>
    <%478%>
    <script language="javascript" type="text/javascript" src="CheckData.js"></script>
    <script language="javascript" type="text/javascript">
    function Loadsettings()
    {
      var cf = document.forms["securitySettings"];
      var SecuOption_WEP_TEXT = cf.sec_opt.options[2].text;
      var SecuOption_WEP_VALUE = cf.sec_opt.options[2].value;
      var SecuOption_WPA2_TEXT = cf.sec_opt.options[3].text;
      var SecuOption_WPA2_VALUE = cf.sec_opt.options[3].value;
      var SecuOption_MIX_TEXT = cf.sec_opt.options[4].text;
      var SecuOption_MIX_VALUE = cf.sec_opt.options[4].value;
      
      setKeys(cf.wep_enc, cf.key1, cf.key2, cf.key3, cf.key4,2);
      setKeys(cf.wep_enc_5g, cf.key5g1, cf.key5g2, cf.key5g3, cf.key5g4,5);
      
      if(cf.ap_mode_flag.value == 0)
      {
        cf.sec_opt.options.length = 4;
        cf.sec_opt.options[1].text = SecuOption_WEP_TEXT;
        cf.sec_opt.options[1].value = SecuOption_WEP_VALUE;
        cf.sec_opt.options[2].text = SecuOption_WPA2_TEXT;
        cf.sec_opt.options[2].value = SecuOption_WPA2_VALUE;
        cf.sec_opt.options[3].text = SecuOption_MIX_TEXT;
        cf.sec_opt.options[3].value = SecuOption_MIX_VALUE;
        
        cf.sec_opt_5g.options.length = 4;
        cf.sec_opt_5g.options[1].text = SecuOption_WEP_TEXT;
        cf.sec_opt_5g.options[1].value = SecuOption_WEP_VALUE;
        cf.sec_opt_5g.options[2].text = SecuOption_WPA2_TEXT;
        cf.sec_opt_5g.options[2].value = SecuOption_WPA2_VALUE;
        cf.sec_opt_5g.options[3].text = SecuOption_MIX_TEXT;
        cf.sec_opt_5g.options[3].value = SecuOption_MIX_VALUE;
      }
    }

    function CheckData()
    {
      var cf = document.forms["securitySettings"];
      var check_24G = 0;
      var check_5G = 0;
      var need_disable_wps = 0;
      var ap_mode_cur = "<%463%>";
      var ap_band_cur = "<%464%>";
      
      if (cf.ap_mode_flag.value == 1)
      {
        cf.wl_same_sec.value = 0;
        if(cf.sec_opt.value == "1")
          cf.security_type.value = "None";
        else if(cf.sec_opt.value == "2")
          cf.security_type.value = "WEP";
        else if(cf.sec_opt.value == "3")
          cf.security_type.value = "WPA-PSK";
        else if(cf.sec_opt.value == "4")
          cf.security_type.value = "WPA2-PSK";
        else if(cf.sec_opt.value == "5")
          cf.security_type.value = "WPA-AUTO-PSK";

        cf.wl_same_sec_5g.value = 0;
        if(cf.sec_opt_5g.value == "1")
          cf.security_type_5g.value = "None";
        else if(cf.sec_opt_5g.value == "2")
          cf.security_type_5g.value = "WEP";
        else if(cf.sec_opt_5g.value == "3")
          cf.security_type_5g.value = "WPA-PSK";
        else if(cf.sec_opt_5g.value == "4")
          cf.security_type_5g.value = "WPA2-PSK";
        else if(cf.sec_opt_5g.value == "5")
          cf.security_type_5g.value = "WPA-AUTO-PSK";
      }
      else
      {
        if(cf.what_pwd.selectedIndex == 0)
          cf.wl_same_sec.value = 1;
        else if(cf.what_pwd.selectedIndex == "1")
        {
          cf.wl_same_sec.value = 0;
          if(cf.sec_opt.value == "1")
            cf.security_type.value = "None";
          else if(cf.sec_opt.value == "2")
            cf.security_type.value = "WEP";
          else if(cf.sec_opt.value == "3")
            cf.security_type.value = "WPA-PSK";
          else if(cf.sec_opt.value == "4")
            cf.security_type.value = "WPA2-PSK";
          else if(cf.sec_opt.value == "5")
            cf.security_type.value = "WPA-AUTO-PSK";
        }
        else
        {
          cf.wl_same_sec.value = 0;
          cf.security_type.value = "None";
        }
        
        if(cf.what_pwd_5g.selectedIndex == 0)
          cf.wl_same_sec_5g.value = 1;
        else if(cf.what_pwd_5g.selectedIndex == 1)
        {
          cf.wl_same_sec_5g.value = 0;
          if(cf.sec_opt_5g.value == "1")
            cf.security_type_5g.value = "None";
          else if(cf.sec_opt_5g.value == "2")
            cf.security_type_5g.value = "WEP";
          else if(cf.sec_opt_5g.value == "3")
            cf.security_type_5g.value = "WPA-PSK";
          else if(cf.sec_opt_5g.value == "4")
            cf.security_type_5g.value = "WPA2-PSK";
          else if(cf.sec_opt_5g.value == "5")
            cf.security_type_5g.value = "WPA-AUTO-PSK";
        }
        else
        {
          cf.wl_same_sec_5g.value = 0;
          cf.security_type_5g.value = "None";
        }
      }

      if (cf.ap_mode_flag.value == 1)
      {
        cf.what_pwd[1].selected = true;
        cf.what_pwd_5g[1].selected = true;
        
        check_24G = 1;
        check_5G = 1;
      }
      else if (ap_mode_cur == "2")
      {
        check_24G = 1;
        check_5G = 1;
      }
      else if(ap_mode_cur == "1" && ap_band_cur == "5G")
      {
        check_5G = 1;
      }
      else
      {
        check_24G = 1;
      }
      
      if (check_24G)
      {
        if (!CheckData24G())
          return false;
        
        if ((cf.sec_opt.value == 2) || (cf.sec_opt.value == 3))
          need_disable_wps = 1;
      }
      
      if (check_5G)
      {
        if (!CheckData5G())
          return false;
        
        if ((cf.sec_opt_5g.value == 2) || (cf.sec_opt_5g.value == 3))
          need_disable_wps = 1;
      }
      
      if (need_disable_wps)
      {
         if (!confirm("<%479%>")){
             return false;
         }
      }
      cf.submit();
      return true; 
    }
    
    function CheckData24G()
    {
      var cf = document.forms["securitySettings"];
      if (cf.ssid.value == "")
      {
        alert("<%480%>");
        return false;
      }
      
      if (cf.ssid.value.match( /[^\x20-\x7E]/ ))
      {
        alert("<%481%>");
        return false;
      }
      
      if (0 == cf.what_pwd.value) /*Same with exist network*/
        return true;
      else if (2 == cf.what_pwd.value) /* None */
        return true;
      
      if (cf.sec_opt.value == 0)
      {
        alert("<%482%>");
        return false;
      }
      else if (cf.sec_opt.value == 1) /* None */
        return true;
      else if (cf.sec_opt.value == 2) /* WEP */
         return CheckData_WEP(cf.wep_enc, cf.wep_key_no, "key", cf.key1, cf.key2, cf.key3, cf.key4);
      else
         return CheckData_WPA(cf.passphrase);
    }
    
    function CheckData5G()
    {
      var cf = document.forms["securitySettings"];
      if (cf.ssid_5g.value == "")
      {
        alert("<%480%>");
        return false;
      }
      
      if (cf.ssid_5g.value.match( /[^\x20-\x7E]/ ))
      {
         alert("<%481%>");
         return false;
      }
      
      if (0 == cf.what_pwd_5g.value) /*Same with exist network*/
        return true;
      else if (2 == cf.what_pwd_5g.value) /* None */
        return true;
      
      if (cf.sec_opt_5g.value == 0)
      {
        alert("<%482%>");
        return false;
      }
      else if(cf.sec_opt_5g.value == 1) /* None */
        return true;
      else if(cf.sec_opt_5g.value == 2) /* WEP */
        return CheckData_WEP(cf.wep_enc_5g, cf.wep_key_no_5g, "key5g", cf.key5g1, cf.key5g2, cf.key5g3, cf.key5g4);
      else
        return CheckData_WPA(cf.passphrase_5g);
    }
    
    $.noConflict();
    jQuery(document).ready(function($) {
      var msgStr = "<%117%>";
      $('.tipLink').data('msg', msgStr);
      
      if ($("#ap_mode_flag").val() === '1')
      {
        $('.secondary').attr('href', 'genie_start.htm');
        $(".whatPwd_li").css("display","none");
        $(".diffPwd").css("display","block");
        $("#header_str").text("<%94%>");
        $('#ssid_24g_row').css('display', 'block');
        $('#ssid_5g_row').css('display', 'block');
      }
      else
      {
        $('.secondary').attr('href', 'IA_to_welcome.html');
        $(".whatPwd_li").css("display","block");
        if ($("#mode").val() === '1')
        {
          if($("#ap_band").val() === '2.4G')
          {
            $('#ssid_24g_row').css('display', 'block');
            $('#ssid_24g_row').removeClass("first");
            $('#ssid_24g_row').addClass("center");
            $('#ssid_5g_row').css('display', 'none');
          }
          else if($("#ap_band").val() === '5G')
          {
            $('#ssid_24g_row').css('display', 'none');
            $('#ssid_5g_row').addClass("center");
            $('#ssid_5g_row').css('display', 'block');
          }
        }
        else
        {
          $('#ssid_24g_row').css('display', 'block');
          $('#ssid_5g_row').css('display', 'block');
        }
      }
    });
    </script>
  </body>
  
  </html>
